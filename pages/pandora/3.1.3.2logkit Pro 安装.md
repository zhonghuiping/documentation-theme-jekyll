本文档是一个安装教程，提供各类系统的 logkit Pro 安装指导。

# **下载 logkit Pro 到本地**

## **当前版本: v0.2.1**

## **Windows 版本 logkit Pro 下载**

[windows 64位版本下载](https://pandora-dl.qiniu.com/logkit-pro_windows64_v0.2.1.zip)

[windows 32位版本下载](https://pandora-dl.qiniu.com/logkit-pro_windows32_v0.2.1.zip)


## **Linux Ubuntu/Debian 版本下载**

[linux 64位版本下载](https://pandora-dl.qiniu.com/logkit-pro_linux64_v0.2.1.tar.gz)

[linux 32位版本下载](https://pandora-dl.qiniu.com/logkit-pro_linux32_v0.2.1.tar.gz)


## **Linux Centos/Redhat 版本下载**

[Centos/Redhat 64位版本下载](https://pandora-dl.qiniu.com/logkit-pro_centos64_v0.2.1.tar.gz)


## **MacOS 版本下载**

[MacOS 版本下载](https://pandora-dl.qiniu.com/logkit-pro_mac_v0.2.1.tar.gz)

## **Docker 镜像版本下载**

```
docker pull qiniupandora/logkit:v0.2.1
docker run -d -p 3000:3000 -v /local/logkit/dataconf:/app/confs -v /local/log/path:/logs/path qiniupandora/logkit:v0.2.1
```

镜像中，logkit-pro 读取`/app/confs`下的配置文件，所以可以通过挂载目录的形式，将本地的 `logkit-pro` 收集器配置目录 `/local/logkit/dataconf`挂载到镜像里面。

需要注意的是，镜像中的 logkit-pro 收集 `/logs` 目录下的日志，需要把本地的日志目录也挂载到镜像里面去才能启动，比如本地的日志目录为`/local/log/path`, 挂载到镜像中的 `/logs/path` 目录，那么`/local/logkit/dataconf` 目录下的配置文件填写的日志路径必须是 `/logs/path` 。

其他如读取Socket、mysql等，请注意docker启动时的网络模式，选择host模式。


# **启动 logkit Pro**

## **直接启动**

通过命令行进入 logkit Pro 所在的文件夹，然后输入：

```
./logkit-pro -f logkit-pro.conf
```

## **后台启动**

通过命令行进入 logkit Pro 所在的文件夹，然后输入：

```
nohup ./logkit-pro -f logkit-pro.conf > logkit.log 2>&1 &
```

## **supervisor管理**

我们强烈推荐您使用supervisor管理logkit-pro，具体可以查看文档： [使用supervisor管理logkit-pro](/insight/manual/4868/logkit-pro-supervisor)

# **访问 logkit Pro**

启动后，您可以直接打开浏览器访问，默认的端口为 `3000`

http://127.0.0.1:3000

![logkit首页](https://odum9helk.qnssl.com/FoPsWnVSjGJ3FzyigTDVAoq60MoF)

## **更改 logkit Pro 相关配置**

在本地的 logkit Pro 文件夹里，找到 `logkit-Pro.conf`， `logkit-Pro.conf`是logkit Pro 的基础配置文件，主要用于指定 logkit Pro 版本信息、服务端信息、机器信息、运行日志等。

典型的配置如下：

```
{
  "version": 1,
  "service": {
    "bind_host": ":3000",
    "static_dir": "public",
    "upload_dir": "data/upload",
    "disable_web": false
  },
  "service_url": {
    "smart_elf": "https://logkit-pro.qiniu.com/"
  },
  "agent": {
    "connect_to_server": false,
    "id_path": "",
    "token_path": "",
    "ak": "",
    "sk": "",
    "token": "",
    "download_token": "",
    "tags": []
  },
  "runtime": {
    "max_procs": 1,
    "pprof_host": ":3002"
  },
  "log": {
    "level": 1,
    "log_path": "",
    "clean_self_log": true,
    "clean_self_dir": "",
    "clean_self_pattern": "",
    "clean_self_cnt": 0,
    "show_routing": false
  },
  "security": {
    "disable_auths": false,
    "auths_file": "auths.conf"
  },
  "confs_path": ["confs*"],
  "time_layouts": []
}

```

您可以更改配置文件，比如将 127.0.0.1 换成 logkit  Pro 所在机器可被访问的 IP 地址，更改`bind_host`配置项即可。


# **登录**

我们提供了 2 种登录方式，一种是本地登录，另一种是通过七牛的 ak、sk 登录。

## **本地登录**

![本地登录](https://pandora-kibana.qiniu.com/quickstart/login.png)

本地登录的默认用户名和密码都是 admin。

您可以修改本地 logkit Pro 文件夹中的`auth.conf`配置文件添加或修改用户名密码。

![](https://pandora-kibana.qiniu.com/logkitPro/auth.png)

> 注意1: admin 用户可以看到所有用户创建的配置和运行信息，其他用户则只能看到自己的。

> 注意2: 本地登录无需外网访问能力


## **使用七牛账号 ak、sk 登录**

![aksk登录](https://pandora-kibana.qiniu.com/logkitPro/aksk.png)

> 您也可以通过 ak、sk 登录，使用七牛的 ak、sk 登录需要可以连通七牛的公有云。
 
如果登录不了，在确认ak、sk正确的情况下，请以此检查以下情况：
1. 机器是否可以访问 https://logkit-pro.qiniu.com ？  `ping https://logkit-pro.qiniu.com`
2. 机器的系统时间是否准确，使用ak、sk登录要求机器的时间与服务器鉴权的系统时间相差在15分钟内，请同步机器的时间。

